<form method="POST" action="{{ url_for('register.register') }}">
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>

    <label for="password">Jelszó:</label>
    <input type="password" id="password" name="password" required>

    <ul id="password-rules">
        <li id="rule-length" class="invalid">Min. 8 karakter</li>
        <li id="rule-lower" class="invalid">Tartalmaz kisbetűt</li>
        <li id="rule-upper" class="invalid">Tartalmaz nagybetűt</li>
        <li id="rule-number" class="invalid">Tartalmaz számot</li>
        <li id="rule-special" class="invalid">Tartalmaz speciális karaktert</li>
    </ul>

    <button type="submit">Regisztráció</button>
</form>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul>
      {% for msg in messages %}
        <li style="color:red;">{{ msg }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<style>
    #password-rules { list-style: none; padding: 0; margin: 10px 0; }
    #password-rules li { margin: 5px 0; font-size: 0.9rem; }
    .valid { color: green; }
    .invalid { color: red; }
</style>

<script>
const passwordInput = document.getElementById('password');
const rules = {
    length: document.getElementById('rule-length'),
    lower: document.getElementById('rule-lower'),
    upper: document.getElementById('rule-upper'),
    number: document.getElementById('rule-number'),
    special: document.getElementById('rule-special')
};

passwordInput.addEventListener('input', () => {
    const val = passwordInput.value;
    rules.length.className = val.length >= 8 ? 'valid' : 'invalid';
    rules.lower.className = /[a-z]/.test(val) ? 'valid' : 'invalid';
    rules.upper.className = /[A-Z]/.test(val) ? 'valid' : 'invalid';
    rules.number.className = /\d/.test(val) ? 'valid' : 'invalid';
    rules.special.className = /[!@#$%^&*(),.?":{}|<>]/.test(val) ? 'valid' : 'invalid';
});
</script>
